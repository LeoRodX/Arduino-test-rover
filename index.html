<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4-колесный робот на Arduino Nano</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        h1 {
            margin: 0;
            font-size: 2.2em;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px;
            margin: 30px 0;
        }
        .gallery-item {
            flex: 1 1 300px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: center;
        }
        .gallery-item img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .specs {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        .spec-item {
            margin-bottom: 10px;
        }
        .spec-item strong {
            color: #2c3e50;
        }
        .diagram {
            text-align: center;
            margin: 30px 0;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .diagram img {
            max-width: 100%;
            height: auto;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <header>
        <h1>Стартовый ровер на Arduino</h1>
        <p>Начальная версия ровера с ультрозвуковым дальномером и простой прошивкой, которая подключает все модули и тестирует их базовые режимы</p>
        <p>Ровер предназначен для повторения, изучения и дальнейшего творческого совершенствования</p>
    </header>

    <section class="specs">
        <h2>Описание проекта</h2>
        <p>Этот 4-колесный робот прост в повторении, в основе конструкции микроконтроллер, драйвер моторов и ультразвуковой датчик. Ровер питается от двух аккумуляторов и может использоваться как платформа для различных робототехнических экспериментов.</p>
    </section>

    <section>
        <h2>Фотографии ровера</h2>
        <div class="gallery">
            <div class="gallery-item">
                <img src="front.png" alt="Вид ровера спереди">
                <p>Вид спереди</p>
            </div>
            <div class="gallery-item">
                <img src="behind.png" alt="Вид ровера сзади">
                <p>Вид сзади</p>
            </div>
            <div class="gallery-item">
                <img src="below.png" alt="Вид ровера снизу">
                <p>Вид снизу</p>
            </div>
        </div>
    </section>

    <section class="specs">
        <h2>Компоненты</h2>
        <div class="specs-grid">
            <div class="spec-item">
                <strong>Микроконтроллер:</strong> Arduino Nano
            </div>
            <div class="spec-item">
                <strong>Двигатели:</strong> 4 × TT Motor (3-6V)
            </div>
            <div class="spec-item">
                <strong>Драйвер моторов:</strong> MX1508
            </div>
            <div class="spec-item">
                <strong>Датчик расстояния:</strong> HC-SR04
            </div>
            <div class="spec-item">
                <strong>Питание:</strong> 2 × 18650 (7.4V)
            </div>            
        </div>
    </section>

 
    <section>
        <h3>Дополнительные материалы</h3>
        <ul>
            <li>Шасси для крепления компонентов</li>
            <li>Четыре колеса</li>
            <li>Держатель для дальномера</li>
            <li>Держатели аккумуляторов</li>
            <li>Выключатель питания</li>
            <li>Соединительные провода</li>
            <li>Паяльник и припой (при необходимости)</li>
        </ul>
    </section>

    <section  class="specs">
        <h2>Пошаговая сборка</h2>

        <h3>1. Установка механических компонентов</h3>
        <ol>
            <li>Закрепите 4 двигателя TT Motor на шасси</li>
            <li>Установите колеса на валы двигателей</li>
            <li>Закрепите держатели аккумуляторов</li>
            <li>Закрепите держатель для дальномера HC-SR04</li>           
        </ol>
       <h3>2. Электрические подключения</h3>
    </section>    
        
    <section>
        <h4>Питание:</h4>
        <ol>
            <li>Установите аккумуляторы в держатели</li>
            <li>Соедините держатели последовательно (7.4В)</li>
            <li>Подключите выключатель питания в разрыв плюсового провода</li>
        </ol>

        <h4>Двигатели:</h4>
        <table>
            <tr>
                <th>Драйвер MX1508</th>
                <th>Двигатели</th>
            </tr>
            <tr>
                <td>Выход A+</td>
                <td>Левый передний +, Левый задний +</td>
            </tr>
            <tr>
                <td>Выход A-</td>
                <td>Левый передний -, Левый задний -</td>
            </tr>
            <tr>
                <td>Выход B+</td>
                <td>Правый передний +, Правый задний +</td>
            </tr>
            <tr>
                <td>Выход B-</td>
                <td>Правый передний -, 	Правый задний -</td>
            </tr>
            <tr>
                <td>+</td>
                <td>выключатель ( "+" аккумулятора)</td>
            </tr>
            <tr>
                <td>-</td>
                <td> "-" аккумулятора</td>
            </tr>
        </table>

        <h4>Arduino Nano:</h4>
        <table>
            <tr>
                <th>Пин Arduino</th>
                <th>Подключение</th>
            </tr>
            <tr>
                <td>D2</td>
                <td>HC-SR04 Trig</td>
            </tr>
            <tr>
                <td>D3</td>
                <td>HC-SR04 Echo</td>
            </tr>
            <tr>
                <td>D4</td>
                <td>MX1508 IN1</td>
            </tr>
            <tr>
                <td>D5</td>
                <td>MX1508 IN2</td>
            </tr>
            <tr>
                <td>D6</td>
                <td>MX1508 IN3</td>
            </tr>
            <tr>
                <td>D7</td>
                <td>MX1508 IN4</td>
            </tr>
            <tr>
                <td>5V</td>
                <td>HC-SR04 VCC</td>
            </tr>
            <tr>
                <td>GND</td>
                <td>HC-SR04 GND</td>
            </tr>
            <tr>
                <td>VIN</td>
                <td>выключатель ( "+" аккумулятора)</td>
            </tr>
            <tr>
                <td>GND (второй)</td>
                <td>"-" аккумулятора</td>
            </tr>
        </table>
    </section>

    <section class="specs">
        <h2>Программное обеспечение</h2>

        <h3>Функционал скетча</h3>
        <ol>
            <li><strong>Инициализация систем</strong>:
                <ul>
                    <li>Настройка пинов ввода/вывода</li>
                    <li>Тестовая индикация (3 мигания встроенного светодиода)</li>
                    <li>Остановка всех двигателей</li>
                </ul>
            </li>
            <li><strong>Тест двигателей</strong>:
                <ul>
                    <li>Последовательное тестирование пар двигателей</li>
                    <li>Вращение вперед/назад по 1 секунде</li>
                    <li>Индикация завершения теста</li>
                </ul>
            </li>
            <li><strong>Тест дальномера</strong>:
                <ul>
                    <li>Непрерывное измерение расстояния</li>
                    <li>Адаптивная индикация (частота мигания зависит от расстояния)</li>
                </ul>
            </li>
        </ol>
        </section>

        <section">

        <h3>Код для загрузки</h3>
        <div class="code-block">
            <pre>// Пин для светодиода
#define LED_PIN 13

// Пины для ультразвукового датчика HC-SR04
#define TRIG_PIN 2  //D2
#define ECHO_PIN 3  //D3

// Пины для драйвера двигателей MX1508
// Левые двигатели (пара A)
#define LEFT_IN1 4  // IN1 на MX1508 (двигатель A)
#define LEFT_IN2 5  // IN2 на MX1508 (двигатель A)
// Правые двигатели (пара B)
#define RIGHT_IN3 6 // IN3 на MX1508 (двигатель B)
#define RIGHT_IN4 7 // IN4 на MX1508 (двигатель B)

// Время работы двигателей при тесте (мс)
#define MOTOR_TEST_TIME 1000
// Задержка между тестами (мс)
#define TEST_DELAY 500

void setup() {
  // Инициализация светодиода
  pinMode(LED_PIN, OUTPUT);
  
  // Инициализация HC-SR04
  pinMode(TRIG_PIN, OUTPUT);
  pinMode(ECHO_PIN, INPUT);
  
  // Инициализация пинов двигателей
  pinMode(LEFT_IN1, OUTPUT);
  pinMode(LEFT_IN2, OUTPUT);
  pinMode(RIGHT_IN3, OUTPUT);
  pinMode(RIGHT_IN4, OUTPUT);
  
  // Остановка всех двигателей
  stopAllMotors();
  
  // Тест светодиода - 3 мигания
  for (int i = 0; i < 3; i++) {
    digitalWrite(LED_PIN, HIGH);
    delay(200);
    digitalWrite(LED_PIN, LOW);
    delay(200);
  }
  
  delay(1000); // Пауза перед тестом двигателей
}

void loop() {
  static bool motorsTested = false;
  
  if (!motorsTested) {
    // Тест левой пары двигателей (A)
    testMotorPair("Левая пара", LEFT_IN1, LEFT_IN2);
    delay(TEST_DELAY);
    
    // Тест правой пары двигателей (B)
    testMotorPair("Правая пара", RIGHT_IN3, RIGHT_IN4);
    delay(TEST_DELAY);
    
    // Специальный сигнал светодиодом - 2 раза по 2 коротких мигания
    for (int i = 0; i < 2; i++) {
      for (int j = 0; j < 2; j++) {
        digitalWrite(LED_PIN, HIGH);
        delay(100);
        digitalWrite(LED_PIN, LOW);
        delay(100);
      }
      delay(200);
    }
    
    delay(1000);
    motorsTested = true;
  }
  
  // Тест равномерного мигания и сонара
  testSonarWithLED();
}

void testMotorPair(const String &pairName, int in1, int in2) {
  // Вращение вперед
  digitalWrite(in1, HIGH);
  digitalWrite(in2, LOW);
  delay(MOTOR_TEST_TIME);
  
  // Вращение назад
  digitalWrite(in1, LOW);
  digitalWrite(in2, HIGH);
  delay(MOTOR_TEST_TIME);
  
  // Остановка
  digitalWrite(in1, LOW);
  digitalWrite(in2, LOW);
}

void stopAllMotors() {
  digitalWrite(LEFT_IN1, LOW);
  digitalWrite(LEFT_IN2, LOW);
  digitalWrite(RIGHT_IN3, LOW);
  digitalWrite(RIGHT_IN4, LOW);
}

float getDistance() {
  // Отправка импульса
  digitalWrite(TRIG_PIN, LOW);
  delayMicroseconds(2);
  digitalWrite(TRIG_PIN, HIGH);
  delayMicroseconds(10);
  digitalWrite(TRIG_PIN, LOW);
  
  // Измерение длительности импульса
  long duration = pulseIn(ECHO_PIN, HIGH);
  
  // Расчет расстояния в см
  return duration * 0.034 / 2;
}

void testSonarWithLED() {
  float distance = getDistance();
  
  // Частота мигания зависит от расстояния
  int blinkDelay;
  
  if (distance < 10) { // Очень близко - быстрое мигание
    blinkDelay = 100;
  } else if (distance < 30) { // Близко - среднее мигание
    blinkDelay = 200;
  } else if (distance < 50) { // Далеко - медленное мигание
    blinkDelay = 400;
  } else { // Очень далеко - очень медленное мигание
    blinkDelay = 800;
  }
  
  // Мигание светодиодом
  digitalWrite(LED_PIN, HIGH);
  delay(blinkDelay);
  digitalWrite(LED_PIN, LOW);
  delay(blinkDelay);
}</pre>
        </div>
    </section>

    <section class="testing">
        <h2>Тестирование и использование</h2>
        <ol>
            <li>Включите питание ровера</li>
            <li>Наблюдайте последовательность тестов:
                <ul>
                    <li>Индикация запуска</li>
                    <li>Тест двигателей (каждая пара должна вращаться)</li>
                    <li>Переход в режим теста дальномера</li>
                </ul>
            </li>
            <li>Для проверки дальномера подносите руку на разные расстояния - частота мигания светодиода будет меняться</li>
        </ol>

        <div class="note">
            <h3>Безопасность</h3>
            <ul>
                <li>Проверяйте полярность подключения аккумуляторов</li>
                <li>Убедитесь в надежности всех соединений перед включением</li>
                <li>Избегайте коротких замыканий в цепях питания</li>
            </ul>
        </div>
    </section> 

      <section class="specs">
        <p>Вопросы можно направлять по адресу <a href="mailto:admxp@yandex.ru">admxp@yandex.ru</a></p>
    </section>

    <footer>
        <p>© Terre & Co, 2025</p>
    </footer>
</body>
</html>
